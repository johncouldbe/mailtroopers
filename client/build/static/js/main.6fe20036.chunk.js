(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{147:function(e,t,a){e.exports=a.p+"static/media/bullhorn.843e9160.svg"},162:function(e,t,a){e.exports=a(354)},256:function(e,t,a){},302:function(e,t){},305:function(e,t,a){},307:function(e,t,a){},315:function(e,t,a){},317:function(e,t,a){},319:function(e,t,a){e.exports=a.p+"static/media/share.52822437.svg"},320:function(e,t,a){},329:function(e,t,a){},33:function(e,t,a){t.SOCKET_URL="https://mailtroopers.herokuapp.com",t.BASE_URL="https://mailtroopers.herokuapp.com"},331:function(e,t,a){e.exports=a.p+"static/media/bomb.9463f931.svg"},332:function(e,t,a){},334:function(e,t,a){},336:function(e,t,a){},338:function(e,t,a){},340:function(e,t,a){},342:function(e,t,a){},344:function(e,t,a){},346:function(e,t,a){},348:function(e,t,a){},350:function(e,t,a){},352:function(e,t,a){},354:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(148),s=a.n(i),c=a(2),o=(a(256),a(8)),l=a(9),m=a(12),u=a(10),d=a(11),p=a(13),h=a(45),E=a.n(h),f=a(153),v=a.n(f),g=a(33),b=function(){localStorage.removeItem("authToken")},y=a(154),O=a.n(y),N=function(e){return{type:"STORE_EMAILS",emails:e}},C=function(e,t){return function(a){return t.emit("delete campaign",e)}},k=function(e){return{type:"SELECT_CAMPAIGN",campaign:e}},w=function(e){return{type:"UPDATE_CURRENT_VERSION",version:e}},j=function(e,t,a,n,r){return function(i){return r.emit("add comment",{campaignId:e,version:t,userId:a,comment:n})}},x={type:"CLEAR_RECRUIT_MSGS"},_=function(e,t,a){return function(n){return a.emit("remove recruit",{recruit:e,campaignId:t})}},S=function(e,t,a){return function(n){return a.emit("delete version",{version:e,campaignId:t})}},T={type:"TOGGLE_RECRUIT_MODAL"},M={type:"TOGGLE_COMMENT_MODAL"},R={type:"TOGGLE_CREATE_EMAIL_MODAL"},I={type:"TOGGLE_COPIED_MODAL"},L=function(e){return{type:"CONNECT_SOCKET",socket:e}},A=function(e,t){var a,n=v()(e);!function(e){localStorage.setItem("authToken",e)}(e),t(G(e)),t(D(n.user)),t((a=n.user._id,function(e){return E.a.get("".concat(g.BASE_URL,"/campaigns/").concat(a)).then(function(t){e(N(t.data))}).catch(function(e){console.log(e)})})).then(function(){return t(function(e){return function(t,a){var n=O.a.connect(g.SOCKET_URL);n.once("connect",function(){n.emit("authenticate",{token:e}).on("authenticated",function(){var e=a().email.emails,r=a().user.currentUser._id;t(L(n)),e.map(function(e){return n.emit("room",e._id)}),n.emit("room",r)}).on("campaign added",function(e){var n=a().modal.createEmailModal;console.log("campaign added",e),t(function(e){return{type:"ADD_NEW_CAMPAIGN",campaign:e}}(e)),n&&t(R)}).on("campaign deleted",function(e){t(function(e){return{type:"REMOVE_CAMPAIGN",campaign:e}}(e));var n=a().email.selectedCampaign;n&&e._id===n._id&&t(k(null))}).on("update campaign",function(e){t(function(e){return{type:"UPDATE_CAMPAIGN",campaign:e}}(e))}).on("recruited",function(e){t(function(e){return{type:"RECRUITED",recruits:e}}(e))}).on("join room",function(e){n.emit("room",e)}).on("unauthorized",function(){t(L(null))})})}}(e))})},U=function(e){return{type:"REGISTER_ERR",err:e}},G=function(e){return{type:"SET_AUTH_TOKEN",authToken:e}},D=function(e){return{type:"SET_CURRENT_USER",currentUser:e}},P=function(e,t){return function(a){var n=btoa("".concat(e,":").concat(t));E()({url:"".concat(g.BASE_URL,"/auth/login"),method:"post",headers:{Authorization:"Basic ".concat(n)}}).then(function(e){var t=e.data.authToken;A(t,a)}).catch(function(e){console.log(e),a(B("Incorrect username or password"))})}},B=function(e){return{type:"LOGIN_ERR",err:e}},V=function(){return function(e,t){var a=t().user.authToken;return E()("".concat(g.BASE_URL,"/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)}}).then(function(t){A(t.data.authToken,e)}).catch(function(t){e(D(null)),e(G(null)),b(a)})}};a(305);var F=Object(c.b)(function(e){return{loggedIn:null!==e.user.currentUser}})(function(e){return e.loggedIn?r.a.createElement(p.c,{to:"/dashboard"}):r.a.createElement("div",{className:"home"},r.a.createElement("header",null,r.a.createElement("div",{className:"header-letter-left"}),r.a.createElement("div",{className:"header-letter-right"}),r.a.createElement("div",{className:"h1 white-text header-text"},"STOP SENDING MISTAKES")),r.a.createElement("main",null,r.a.createElement("section",null,r.a.createElement("div",{className:"first-ribbon-start"}),r.a.createElement("div",{className:"left-content"}),r.a.createElement("div",{className:"right-content"},r.a.createElement("div",{className:"h1 white-text left-content-header LP-H1"},"Collaborate as a Team"),r.a.createElement("div",{className:"p white-text"},"Lets face it... We've been doing it wrong. But no longer."),r.a.createElement("div",{className:"p white-text"},"Now, your team has a place for reviewing your email marketing campaigns. You no longer have to forward an email to get others to review. No more confusing comment trains that build up in your inbox!"),r.a.createElement(p.b,{to:"/register"},r.a.createElement("button",{className:"home-screen-btn"},r.a.createElement("span",{className:"p white-text"},"Try It Out!"))))),r.a.createElement("section",null,r.a.createElement("div",{className:"first-ribbon-side"}),r.a.createElement("div",{className:"first-ribbon-end"}),r.a.createElement("div",{className:"second-ribbon-start"})),r.a.createElement("section",{className:"taller-section"},r.a.createElement("div",{className:"second-ribbon-side"}),r.a.createElement("div",{className:"second-ribbon-end"}),r.a.createElement("div",{className:"second-ribbon-end-bottom"}),r.a.createElement("div",{className:"LP-List"},r.a.createElement("div",{className:"h1 white-text center-text LP-H1"},"How it Works..."),r.a.createElement("div",{className:"p white-text"},r.a.createElement("ol",null,r.a.createElement("li",null,"Create that awesome email on whatever email marketing tool you're using. i.e. Mailchimp, Constant Contact, etc."),r.a.createElement("li",null,"Create a new campaign in the app."),r.a.createElement("li",null,"Send your email to the unique email address created for you. Each time you send an email to that address a new version will be created."),r.a.createElement("li",null,"Add recruits to review your new campaign."),r.a.createElement("li",null,"Rinse and repeat.")))))))});a(307);var W=Object(c.b)(function(e){return{loggedIn:null!==e.user.currentUser}})(function(e){return r.a.createElement("nav",null,r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"off-white-text h1"},"MailTroopers")),r.a.createElement("div",{className:"log"},e.loggedIn?r.a.createElement("div",{className:"off-white-text h4",onClick:function(){window.confirm("Are you sure you want to log out?")&&(e.dispatch(D(null)),e.dispatch(G(null)),b())}},"Log Out"):r.a.createElement("div",null,r.a.createElement(p.b,{to:"/login"},r.a.createElement("span",{className:"off-white-text h4"},"Log In")),r.a.createElement("span",{className:"off-white-text h4"}," | "),r.a.createElement(p.b,{to:"/register"},r.a.createElement("span",{className:"off-white-text h4"},"Register")))))}),Y=a(155),H=a.n(Y),K=a(32),z=a(65),Z=a.n(z),q=(a(315),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).showCommentModal=a.showCommentModal.bind(Object(K.a)(Object(K.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"deleteComment",value:function(e,t,a,n){window.confirm("Are you sure you want to delete this comment?")&&this.props.dispatch(function(e,t,a,n){return function(r){return n.emit("delete comment",{campaignId:e,version:t,commentId:a})}}(e,t,a,n))}},{key:"comments",value:function(){var e=this;if(this.props.selectedCampaign&&this.props.selectedCampaign.versions.length){var t=this.props.selectedCampaign.versions[this.props.currentVersion-1].comments,a=this.props.selectedCampaign.versions[this.props.currentVersion-1]._id,n=this.props.selectedCampaign._id,i=this.props.socket;return t.map(function(t,s){var c=t.comment.split("\n").map(function(e,t){return r.a.createElement("span",{key:t},e,r.a.createElement("br",null))}),o=t.user._id===e.props.currentUser._id?r.a.createElement("div",{className:"delete-comment",onClick:function(){e.deleteComment(n,a,t._id,i)}}):"";return r.a.createElement("div",{className:"comment",key:s},r.a.createElement("div",{className:"comment-container"},o,r.a.createElement("div",{className:"h3 red-text comment-name"},t.user.firstName," ",t.user.lastName),r.a.createElement("div",{className:"h4 grey-text comment-date"},Z()(t.date).fromNow()),r.a.createElement("div",{className:"p grey-text comment-comment"},c)))})}}},{key:"commentBtn",value:function(){if(this.props.selectedCampaign&&this.props.selectedCampaign.versions.length)return r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",onClick:this.showCommentModal},"Comment \xa0",r.a.createElement("img",{src:a(147),alt:"Share"})))}},{key:"showCommentModal",value:function(e){e.preventDefault(),this.props.dispatch(M)}},{key:"render",value:function(){return r.a.createElement("div",{className:"comments"},this.commentBtn(),this.comments())}}]),t}(n.Component)),$=Object(c.b)(function(e){return{selectedCampaign:e.email.selectedCampaign,currentVersion:e.email.currentVersion,currentUser:e.user.currentUser,socket:e.io.socket}})(q),J=(a(317),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).firstLetter=function(e){return e.split("")[0].toUpperCase()},a.showRecruitModal=a.showRecruitModal.bind(Object(K.a)(Object(K.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"troop",value:function(){var e=this;if(this.props.selectedCampaign){var t=this.props.selectedCampaign.master===this.props.currentUser._id,a=this.props.socket,n=this.props.selectedCampaign._id;return!this.props.selectedCampaign.contributors.length&&t?r.a.createElement("div",null,r.a.createElement("div",{className:"h3 red-text center-text"},"Those emails won't review themselves!"),r.a.createElement("div",{className:"h4 grey-text center-text"},"Build your team")):this.props.selectedCampaign.contributors.map(function(i,s){var c=t?r.a.createElement("div",{className:"delete-recruit",onClick:function(){e.props.dispatch(_(i._id,n,a))}}):"";return r.a.createElement("div",{className:"trooper-container",key:s},r.a.createElement("div",{className:"trooper-img"},r.a.createElement("div",{className:"h2 white-text"},e.firstLetter(i.firstName))),r.a.createElement("div",{className:"h4 trooper-name grey-text"},"".concat(i.firstName," ").concat(i.lastName)),c)})}}},{key:"troopBtn",value:function(){if(this.props.selectedCampaign&&this.props.selectedCampaign.master===this.props.currentUser._id)return r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",onClick:this.showRecruitModal},"Recruit \xa0",r.a.createElement("img",{src:a(319),alt:"Share"})))}},{key:"showRecruitModal",value:function(e){e.preventDefault(),this.props.dispatch(T)}},{key:"render",value:function(){return r.a.createElement("div",{className:"troop"},this.troop(),this.troopBtn())}}]),t}(n.Component)),Q=Object(c.b)(function(e){return{currentUser:e.user.currentUser,selectedCampaign:e.email.selectedCampaign,socket:e.io.socket}})(J),X={type:"TOGGLE_LEFT_SIDEBAR"},ee={type:"TOGGLE_RIGHT_SIDEBAR"},te={type:"TOGGLE_TEAM"},ae={type:"TOGGLE_COMMENTS"},ne={type:"TOGGLE_REVIEW"},re=(a(320),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"hidePanels",value:function(){return!this.props.teamOpen&&this.props.commentsOpen?"right-sidebar close-team":this.props.teamOpen&&!this.props.commentsOpen?"right-sidebar close-comments":this.props.teamOpen||this.props.commentsOpen?"right-sidebar":"right-sidebar close-team-and-comments"}},{key:"buttonDirection",value:function(e){return"team"===e?this.props.teamOpen?"toggle-team-show-btn":"toggle-team-show-btn toggle-team-hide-btn":"comments"===e?this.props.commentsOpen?"toggle-comments-show-btn":"toggle-comments-show-btn toggle-comments-hide-btn":void 0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.hidePanels()},r.a.createElement("div",{className:"team-header"},r.a.createElement("div",{className:"grey-text h2 center-text"},"Troop"),r.a.createElement("div",{className:this.buttonDirection("team"),onClick:function(){e.props.dispatch(te)}}),r.a.createElement("div",{className:"faded-border"})),r.a.createElement(Q,null),r.a.createElement("div",{className:"comments-header"},r.a.createElement("div",{className:this.buttonDirection("comments"),onClick:function(){e.props.dispatch(ae)}}),r.a.createElement("div",{className:"grey-text h2 center-text"},"Comments"),r.a.createElement("div",{className:"faded-border"})),r.a.createElement($,null))}}]),t}(n.Component)),ie=Object(c.b)(function(e){return{teamOpen:e.mailTrooper.teamOpen,commentsOpen:e.mailTrooper.commentsOpen}})(re),se=a(156),ce=a.n(se);a(329);new ce.a(".clipboard");var oe=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).showModal=function(e){e.preventDefault(),a.props.dispatch(R)},a.deleteEmail=function(e,t){window.confirm("Are you sure you want to delete this campaign?")&&a.props.dispatch(C(e,t))},a.removeEmail=function(e,t,n){a.props.dispatch(_(e,t,n))},a.emailFile=function(e){var t=a.props.selectedCampaign,n="email-file";return n+=e.master===a.props.currentUser._id?" red-left":" yellow-left",t&&e._id===t._id?e._id===t._id?n+" selected-shadow":void 0:n},a.emails=function(){if(a.props.emails)return a.props.emails.map(function(e,t){var n=e.master===a.props.currentUser._id?r.a.createElement("span",null,r.a.createElement("span",{className:"clipboard","data-clipboard-text":"".concat(e.slug,"@mailtroopers.com"),onClick:function(){a.props.dispatch(I)}},"Get Link")," |",r.a.createElement("span",{className:"red-text",onClick:function(){return a.deleteEmail(e._id,a.props.socket)}},"\xa0Delete")):r.a.createElement("span",{className:"red-text",onClick:function(){a.removeEmail(a.props.currentUser._id,e._id,a.props.socket)}},"Remove");return r.a.createElement("div",{className:a.emailFile(e),key:t,onMouseOver:function(e){e.currentTarget.lastChild.className="shown-email-options"},onMouseLeave:function(e){e.currentTarget.lastChild.className="hidden-email-options"},onClick:function(){a.props.dispatch(k(e)),a.props.dispatch(w(e.versions.length))}},r.a.createElement("div",{className:"h4 grey-text comment-date"},e.name),r.a.createElement("div",{className:"p grey-text comment-comment"},Z()(e.date).format("MM/DD/YYYY")),r.a.createElement("div",{className:"hidden-email-options",onClick:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"p grey-text right-text"},n)))})},a.buttonDirection=function(){return a.props.reviewOpen?"toggle-review-show-btn":"toggle-review-show-btn toggle-review-hide-btn"},a.hidePanels=function(){return a.props.reviewOpen?"left-sidebar":"left-sidebar close-review"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.hidePanels()},r.a.createElement("div",{className:"review-header"},r.a.createElement("div",{className:this.buttonDirection(),onClick:function(){e.props.dispatch(ne)}}),r.a.createElement("div",{className:"h2 grey-text center-text"},"Reviews")),r.a.createElement("div",{className:"email-list-container"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn campaign-btn",onClick:function(t){return e.showModal(t)}},"New Campaign  ",r.a.createElement("img",{src:a(331),alt:"New Campaign"}))),r.a.createElement("div",{style:{marginLeft:"calc(50% - 87.5px)"}},r.a.createElement("div",{className:"circle-red"}),r.a.createElement("span",{className:"p grey-text",style:{float:"left",marginTop:"5px"}},"Yours"),r.a.createElement("div",{className:"circle-yellow"}),r.a.createElement("span",{className:"p grey-text",style:{lineHeight:"25px"}},"Theirs")),this.emails()))}}]),t}(n.Component),le=Object(c.b)(function(e){return{emails:e.email.emails,socket:e.io.socket,currentVersion:e.email.currentVersion,reviewOpen:e.mailTrooper.reviewOpen,currentUser:e.user.currentUser,selectedCampaign:e.email.selectedCampaign}})(oe);a(332);var me=Object(c.b)(function(e){return{currentUser:e.user.currentUser,selectedCampaign:e.email.selectedCampaign,currentVersion:e.email.currentVersion,socket:e.io.socket}})(function(e){var t=function(t){var a=t+e.currentVersion;a>0&&a<e.selectedCampaign.versions.length+1&&e.dispatch(w(a))};return r.a.createElement("div",{className:"version"},function(){if(e.selectedCampaign&&0!==e.selectedCampaign.versions.length)return r.a.createElement("div",{className:"version-container"},r.a.createElement("div",{className:"version-left-btn",onClick:function(){return t(-1)}}),r.a.createElement("div",{className:"version-center-display"},r.a.createElement("div",{className:"grey-text p"},e.currentVersion," of ",e.selectedCampaign.versions.length)),r.a.createElement("div",{className:"version-right-btn",onClick:function(){return t(1)}}))}(),function(){if(e.selectedCampaign&&!(e.selectedCampaign.versions.length<=1)&&e.selectedCampaign.master===e.currentUser._id){var t=e.selectedCampaign.versions[e.currentVersion-1]._id,a=e.selectedCampaign._id,n=e.socket;return r.a.createElement("div",{className:"delete-version red-text p center-text",onClick:function(){window.confirm("Are you sure you want to delete this version?")&&e.dispatch(S(t,a,n))}},"Delete Version")}}())}),ue=(a(334),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.socket.emit("subscribeToEmail",{userId:this.props.currentUser._id})}},{key:"displayContainer",value:function(){if(!this.props.selectedCampaign)return r.a.createElement("div",{className:"email-container"},r.a.createElement("span",{className:"h2 red-text center-text"},"You must select a campaign or create a new one.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("span",{className:"h3 red-text center-text"},"Here's how to make a new campaign:"),r.a.createElement("span",{className:"p grey-text"},r.a.createElement("ol",null,r.a.createElement("li",null,'Click the button "New Campaign" and then name it.'),r.a.createElement("li",null,"Email the campaign you'd like to review to the email address we will provide you."),r.a.createElement("li",null,'Click the "Recruit" button on the right side to add new people to review your campaign.'),r.a.createElement("li",null,"Notify them and let them comment on the version you just sent."),r.a.createElement("li",null,"Send the revised email to the same provided address and repeat!"))));if(!this.props.selectedCampaign.versions.length)return r.a.createElement("div",{className:"email-container center-text",style:{padding:"10px"}},r.a.createElement("span",{className:"h3 red-text"},"You haven't made a version for this campaign yet! Send the email you'd like to review to the email address below:"),r.a.createElement("br",null),r.a.createElement("span",{className:"h4 grey-text"},this.props.selectedCampaign.slug,"@mailtroopers.com"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",{className:"h4 red-text"},'Hint: You can quickly copy the email address by clicking "Get Link" on the campaign under the review panel.'));var e=this.props.selectedCampaign.versions[this.props.currentVersion-1];return e?r.a.createElement("div",{className:"email-container"},r.a.createElement("div",{className:"p center-text grey-text",style:{padding:"3px"}},r.a.createElement("span",{className:"h4 red-text"},"Subject:"),"\xa0",e.subject||""),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.html}})):""}},{key:"pickMainClass",value:function(){return window.innerWidth<765?"main-mobile":this.props.leftSidebarOpen&&!this.props.rightSidebarOpen?"main close-right-sidebar":!this.props.leftSidebarOpen&&this.props.rightSidebarOpen?"main close-left-sidebar":this.props.leftSidebarOpen||this.props.rightSidebarOpen?"main":"main close-both-sidebars"}},{key:"buttonDirection",value:function(e){return"right"===e?this.props.rightSidebarOpen?"button right-facing-btn":"button left-facing-btn":"left"===e?this.props.leftSidebarOpen?"button left-facing-btn":"button right-facing-btn":void 0}},{key:"leftBtn",value:function(){var e=this;if(!(window.innerWidth<765))return r.a.createElement("div",{className:"left-close-button",onClick:function(){e.props.dispatch(X)}},r.a.createElement("div",{className:this.buttonDirection("left")}))}},{key:"rightBtn",value:function(){var e=this;if(!(window.innerWidth<765))return r.a.createElement("div",{className:"right-close-button",onClick:function(){e.props.dispatch(ee)}},r.a.createElement("div",{className:this.buttonDirection("right")}))}},{key:"render",value:function(){return r.a.createElement("div",{className:this.pickMainClass()},r.a.createElement(me,null),this.leftBtn(),this.rightBtn(),this.displayContainer())}}]),t}(n.Component)),de=Object(c.b)(function(e){return{leftSidebarOpen:e.mailTrooper.leftSidebarOpen,rightSidebarOpen:e.mailTrooper.rightSidebarOpen,selectedCampaign:e.email.selectedCampaign,currentVersion:e.email.currentVersion,currentUser:e.user.currentUser,socket:e.io.socket}})(ue),pe=a(67),he=(a(336),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).hideRecruitModal=function(e){e.preventDefault(),a.props.dispatch(T),a.props.dispatch(x)},a.state={copied:!1,addressList:[],notEmail:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"validateEmail",value:function(e){return!!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)}},{key:"emailError",value:function(){return this.state.notEmail?r.a.createElement("div",{className:"red-text center-text h4"},this.state.notEmail):""}},{key:"addToList",value:function(){var e=document.getElementById("recruit-address").value;if(!this.validateEmail(e))return this.setState({notEmail:"You must use a valid email address."});return this.state.addressList.find(function(t){return t===e})?this.setState({notEmail:"You've already entered that email address."}):e===this.props.userEmail?this.setState({notEmail:"You can't recruit yourself silly."}):e===this.props.userEmail?this.setState({notEmail:"You can't recruit yourself silly."}):this.props.selectedCampaign.contributors.map(function(t){return e===t.email}).includes(!0)?this.setState({notEmail:"You've already recruited that person."}):(this.setState({addressList:Object(pe.a)(this.state.addressList).concat([e]),notEmail:""}),void(document.getElementById("recruit-address").value=""))}},{key:"removeFromList",value:function(e){this.setState({addressList:this.state.addressList.filter(function(t){return t!==e})})}},{key:"list",value:function(){var e=this;return this.state.addressList.map(function(t,a){return r.a.createElement("div",{key:a,className:"address-container"},r.a.createElement("span",{className:"p white-text address"},t),r.a.createElement("span",{className:"delete-address",onClick:function(){return e.removeFromList(t)}}))})}},{key:"sendRecruit",value:function(){var e=this.state.addressList,t=this.props.selectedCampaign._id,a=this.props.socket;this.props.dispatch(function(e,t,a){return function(n){return a.emit("recruit",{addresses:e,id:t})}}(e,t,a))}},{key:"recruitBtn",value:function(){var e=this;return this.state.addressList.length?r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",onClick:function(){return e.sendRecruit()}},"Add to Troop")):""}},{key:"addRecruitContainer",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"h3 grey-text center-text modal-padding"},"Add the email addresses of the people you want to recruit!"),this.emailError(),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.addToList()}},r.a.createElement("input",{className:"link-container p grey-text",type:"text",id:"recruit-address"}),r.a.createElement("button",{className:"add-address"})),this.list(),this.recruitBtn())}},{key:"recruitedContainer",value:function(){var e=this.props.failures,t=this.props.successes,a=t.length?r.a.createElement("div",null,r.a.createElement("div",{className:"h3 modal-padding grey-text"},"These were successfully recruited:"),r.a.createElement("div",{className:"p modal-padding grey-text"},t.join(", "))):"",n=e.length?r.a.createElement("div",null,r.a.createElement("div",{className:"h3 modal-padding red-text"},"These did not yet have an account with us:",r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:".7em"}},"Ask them to sign up and try again!")),r.a.createElement("div",{className:"p modal-padding grey-text"},e.join(", "))):"";return r.a.createElement("div",null,a,n)}},{key:"render",value:function(){return r.a.createElement("div",{className:"modal-window",onClick:this.hideRecruitModal},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"modal"},r.a.createElement("div",{className:"modal-close",onClick:this.hideRecruitModal}),this.props.successes&&this.props.failures?this.recruitedContainer():this.addRecruitContainer()))}}]),t}(n.Component)),Ee=Object(c.b)(function(e){return{selectedCampaign:e.email.selectedCampaign,socket:e.io.socket,failures:e.email.recruitFailures,successes:e.email.recruitSuccesses,userEmail:e.user.currentUser.email}})(he),fe=(a(338),a(66)),ve=a.n(fe),ge=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(m.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target.value;a.setState({text:t})},a.hideCommentModal=function(e){e.preventDefault(),a.props.dispatch(M)},a.send=function(e){if(""!==a.state.text.trim()){var t=a.props.selectedCampaign.versions[a.props.currentVersion-1]._id,n=a.props.selectedCampaign._id,r=a.props.currentUser._id,i=a.props.socket;a.props.dispatch(j(n,t,r,e,i)),a.setState({sent:!0})}else a.setState({warning:!0})},a.state={sent:!1,text:"",warning:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.warning?r.a.createElement("div",{className:"center-text p grey-text",style:{margin:"10px 0"}},"Please enter a comment in the comment field."):"";return r.a.createElement("div",{className:"modal-window",onClick:this.hideCommentModal},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"modal"},r.a.createElement("div",{className:"modal-close",onClick:this.hideCommentModal}),this.state.sent?r.a.createElement("div",null,r.a.createElement("div",{className:"h3 grey-text center-text"},"Your comment has been posted!"),r.a.createElement("div",{className:"thumbs-up-container"},r.a.createElement("img",{src:ve.a,alt:"Comment Posted!"}))):r.a.createElement("div",null,r.a.createElement("div",{className:"h3 grey-text center-text"},"Type your comment below"),r.a.createElement("textarea",{className:"comment-input-container p grey-text",type:"text",id:"comment-input",onChange:this.handleChange}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",onClick:function(){return e.send(e.state.text)}},"Comment ",r.a.createElement("img",{src:a(147),alt:"Share"}))),t)))}}]),t}(n.Component),be=Object(c.b)(function(e){return{selectedCampaign:e.email.selectedCampaign,currentVersion:e.email.currentVersion,currentUser:e.user.currentUser,socket:e.io.socket}})(ge),ye=a(18),Oe=(a(340),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e){!e.meta.active&&this.props.meta.active&&this.input.focus()}},{key:"render",value:function(){var e,t,a=this;return this.props.meta.touched&&this.props.meta.error&&(e=r.a.createElement("div",{className:"form-error"},this.props.meta.error)),this.props.meta.touched&&this.props.meta.warning&&(t=r.a.createElement("div",{className:"form-warning"},this.props.meta.warning)),r.a.createElement("div",{className:"form-input"},r.a.createElement("label",{htmlFor:this.props.input.name},this.props.label),r.a.createElement("div",{className:"p red-text",style:{fontSize:"12px"}},e,t),r.a.createElement("input",Object.assign({style:{fontFamily:"'Scope One', serif",fontSize:"16px",marginBottom:"10px"},className:"border grey-text"},this.props.input,{id:this.props.input.name,type:this.props.type,ref:function(e){return a.input=e}})))}}]),t}(r.a.Component)),Ne=function(e){return e?void 0:"Required"},Ce=function(e){return""!==e.trim()?void 0:"Cannot be empty"},ke=function(e){return e.trim()===e?void 0:"Cannot start or end with whitespace"},we=function(e){return e&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?"Invalid email address":void 0},je=(a(342),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){var t=e.campaign;return this.props.dispatch(function(e,t,a){return function(n){return a.emit("add campaign",{campaign:e,user:t})}}(t,this.props.user,this.props.socket))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{className:"create-email-form",onSubmit:this.props.handleSubmit(function(t){return e.onSubmit(t)})},r.a.createElement(ye.a,{component:Oe,type:"text",name:"campaign",validate:[Ne,Ce,ke]}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",type:"submit",disabled:this.props.pristine||this.props.submitting},"Create"))))}}]),t}(n.Component)),xe=Object(ye.d)({form:"createEmail",onSubmitFail:function(e,t){return t(Object(ye.b)("createEmail",Object.keys(e)[0]))}})(je),_e=Object(c.b)(function(e){return{err:e.email.createEmailErr,user:e.user.currentUser,socket:e.io.socket}})(function(e){return r.a.createElement("div",{className:"modal-window"},r.a.createElement("div",{className:"modal center-text"},r.a.createElement("div",{className:"modal-close",onClick:function(t){return function(t){t.preventDefault(),e.dispatch(R)}(t)}}),r.a.createElement("div",{className:"h3 grey-text"},"Make a new campaign!",r.a.createElement("br",null),r.a.createElement("span",{style:{fontSize:".8em"}},"Lets start with a name...")),r.a.createElement("div",{className:"p red-text"},e.err),r.a.createElement(xe,{user:e.user,socket:e.socket})))}),Se=(a(344),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).hideCopiedModal=function(){a.props.dispatch(I)},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"modal-window",onClick:this.hideCopiedModal},r.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"modal"},r.a.createElement("div",{className:"modal-close",onClick:this.hideCopiedModal}),r.a.createElement("div",null,r.a.createElement("div",{className:"h3 grey-text center-text"},"Copied to Clipboard!"),r.a.createElement("div",{className:"thumbs-up-container"},r.a.createElement("img",{src:ve.a,alt:"Copied to Clipboard!"})))))}}]),t}(n.Component)),Te=Object(c.b)()(Se),Me=(a(346),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.loggedIn&&window.innerWidth<765&&this.props.dispatch(X)}},{key:"pickMainClass",value:function(){return window.innerWidth<765&&!this.props.leftSidebarOpen&&!this.props.rightSidebarOpen?"grid-mobile":"grid"}},{key:"render",value:function(){if(!this.props.loggedIn)return r.a.createElement(p.c,{to:"/"});var e=this.props.recruitModal?r.a.createElement(Ee,null):"",t=this.props.commentModal?r.a.createElement(be,null):"",a=this.props.createEmailModal?r.a.createElement(_e,null):"",n=this.props.copiedModal?r.a.createElement(Te,null):"";return r.a.createElement("div",null,this.props.currentUser&&this.props.emails&&this.props.socket?r.a.createElement("div",{className:"grid"},r.a.createElement(le,null),r.a.createElement(ie,null),r.a.createElement(de,null)):r.a.createElement("div",{className:"loader-container"},r.a.createElement(H.a,{color:"#f54f45",size:25,margin:4})),e,t,a,n)}}]),t}(n.Component)),Re=Object(c.b)(function(e){return{recruitModal:e.modal.recruitModal,commentModal:e.modal.commentModal,createEmailModal:e.modal.createEmailModal,copiedModal:e.modal.copiedModal,loggedIn:null!==e.user.authToken,currentUser:e.user.currentUser,emails:e.email.emails,selectedCampaign:e.email.selectedCampaign,socket:e.io.socket}})(Me),Ie=(a(348),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){var t=this,a=e.firstName,n=e.lastName,r=e.email,i=e.password,s={firstName:a,lastName:n,email:r,password:i};return this.props.dispatch(function(e){return function(t){return E.a.post("".concat(g.BASE_URL,"/user/register"),{user:e}).then(function(e){e.data.err&&t(U(e.data.err))})}}(s)).then(function(){t.props.dispatch(P(r,i))})}},{key:"render",value:function(){var e,t,a=this;return r.a.createElement("div",{className:"modal-window"},r.a.createElement("div",{className:"modal center-text"},r.a.createElement(p.b,{to:"/"},r.a.createElement("div",{className:"modal-close"})),r.a.createElement("div",{className:"h3 grey-text"},"Sign Up"),r.a.createElement("div",{className:"p red-text"},this.props.regErr),r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(e){return a.onSubmit(e)})},r.a.createElement("label",{htmlFor:"firstName",className:"grey-text h4"},"First name"),r.a.createElement(ye.a,{component:Oe,type:"text",name:"firstName",validate:[Ne,Ce,ke]}),r.a.createElement("label",{htmlFor:"lastName",className:"grey-text h4"},"Last name"),r.a.createElement(ye.a,{component:Oe,type:"text",name:"lastName",validate:[Ne,Ce,ke]}),r.a.createElement("label",{htmlFor:"email",className:"grey-text h4"},"Email"),r.a.createElement(ye.a,{component:Oe,type:"text",name:"email",validate:[Ne,Ce,ke,we]}),r.a.createElement("label",{htmlFor:"password",className:"grey-text h4"},"Password"),r.a.createElement(ye.a,{component:Oe,type:"password",name:"password",validate:[Ne,(t={min:3,max:72},function(e){return t.min&&e.length<t.min?"Must be at least ".concat(t.min," characters long"):t.max&&e.length>t.max?"Must be at most ".concat(t.max," characters long"):void 0}),ke]}),r.a.createElement("label",{htmlFor:"passwordConfirm",className:"grey-text h4"},"Confirm password"),r.a.createElement(ye.a,{component:Oe,type:"password",name:"passwordConfirm",validate:[Ne,Ce,(e="password",function(t,a){return e in a&&t.trim()===a[e].trim()?void 0:"Does not match"})]}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",type:"submit",disabled:this.props.pristine||this.props.submitting},"Register")),r.a.createElement(p.b,{to:"/login"},r.a.createElement("div",{className:"grey-text p"},"Already have an account? Log in")))))}}]),t}(n.Component)),Le=Object(ye.d)({form:"registration",onSubmitFail:function(e,t){return t(Object(ye.b)("registration",Object.keys(e)[0]))}})(Ie),Ae=Object(c.b)(function(e){return{regErr:e.user.regErr,loggedIn:e.user.currentUser}})(function(e){return e.loggedIn?r.a.createElement(p.c,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement(Le,{err:e.logErr}))}),Ue=(a(350),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"onSubmit",value:function(e){var t=e.email,a=e.password;return this.props.dispatch(P(t,a))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"modal-window"},r.a.createElement("div",{className:"modal center-text"},r.a.createElement(p.b,{to:"/"},r.a.createElement("div",{className:"modal-close"})),r.a.createElement("div",{className:"h3 grey-text"},"Log In"),r.a.createElement("div",{className:"p red-text"},this.props.err),r.a.createElement("form",{className:"login-form",onSubmit:this.props.handleSubmit(function(t){return e.onSubmit(t)})},r.a.createElement("label",{htmlFor:"email",className:"grey-text h4"},"Email"),r.a.createElement(ye.a,{component:Oe,type:"text",name:"email",validate:[Ne,Ce,ke,we]}),r.a.createElement("label",{htmlFor:"password",className:"grey-text h4"},"Password"),r.a.createElement(ye.a,{component:Oe,type:"password",name:"password",validate:[Ne,ke]}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"btn",type:"submit",disabled:this.props.pristine||this.props.submitting},"Log In")),r.a.createElement(p.b,{to:"/register"},r.a.createElement("div",{className:"grey-text p"},"Need an account? Sign Up")),r.a.createElement("div",{className:"grey-bg"},r.a.createElement("div",{className:"light-grey-text p"},"Or use a the demo account!"),r.a.createElement("div",{className:"light-grey-text p"},"Email: demo@test.com ",r.a.createElement("br",null),"Password: 123")))))}}]),t}(n.Component)),Ge=Object(ye.d)({form:"login",onSubmitFail:function(e,t){return t(Object(ye.b)("login",Object.keys(e)[0]))}})(Ue),De=Object(c.b)(function(e){return{logErr:e.user.logErr,loggedIn:e.user.currentUser}})(function(e){return e.loggedIn?r.a.createElement(p.c,{to:"/dashboard"}):r.a.createElement("div",null,r.a.createElement(Ge,{err:e.logErr}))}),Pe=(a(352),function(e){function t(){return Object(o.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.hasAuthToken&&this.props.dispatch(V())}},{key:"componentWillReceiveProps",value:function(e){e.loggedIn&&!this.props.loggedIn?this.startPeriodicRefresh():!e.loggedIn&&this.props.loggedIn&&this.stopPeriodicRefresh()}},{key:"componentWillUnmount",value:function(){this.props.socket.close(),this.props.dispatch((this.props.socket,{type:"DISCONNECT_SOCKET"})),this.stopPeriodicRefresh()}},{key:"startPeriodicRefresh",value:function(){var e=this;this.refreshInterval=setInterval(function(){return e.props.dispatch(V())},36e5)}},{key:"stopPeriodicRefresh",value:function(){this.refreshInterval&&clearInterval(this.refreshInterval)}},{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(p.d,{path:"/",component:W}),["/","/login","/signup"].map(function(e,t){return r.a.createElement(p.d,{exact:!0,path:e,component:F,key:t})}),r.a.createElement(p.d,{exact:!0,path:"/dashboard",component:Re}),r.a.createElement(p.d,{exact:!0,path:"/register",component:Ae}),r.a.createElement(p.d,{exact:!0,path:"/login",component:De})))}}]),t}(n.Component)),Be=Object(c.b)(function(e){return{hasAuthToken:null!==e.user.authToken,loggedIn:null!==e.user.currentUser,socket:e.io.socket}})(Pe),Ve=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Fe(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var We=a(14),Ye=a(161),He=a.n(Ye),Ke={leftSidebarOpen:!0,rightSidebarOpen:!0,teamOpen:!0,commentsOpen:!0,reviewOpen:!0},ze={recruitModal:!1,commentModal:!1,createEmailModal:!1,copiedModal:!1},Ze={regErr:null,logErr:null,authToken:null,currentUser:null},qe={createEmailErr:null,emails:null,selectedCampaign:null,currentVersion:0,recruitFailures:null,recruitSuccesses:null},$e={socket:null},Je=Object(We.d)(Object(We.c)({mailTrooper:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_LEFT_SIDEBAR"===t.type?Object.assign({},e,{leftSidebarOpen:!e.leftSidebarOpen}):"TOGGLE_RIGHT_SIDEBAR"===t.type?Object.assign({},e,{rightSidebarOpen:!e.rightSidebarOpen}):"TOGGLE_TEAM"===t.type?Object.assign({},e,{teamOpen:!e.teamOpen}):"TOGGLE_COMMENTS"===t.type?Object.assign({},e,{commentsOpen:!e.commentsOpen}):"TOGGLE_REVIEW"===t.type?Object.assign({},e,{reviewOpen:!e.reviewOpen}):e},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ze,t=arguments.length>1?arguments[1]:void 0;return"TOGGLE_RECRUIT_MODAL"===t.type?Object.assign({},e,{recruitModal:!e.recruitModal}):"TOGGLE_COMMENT_MODAL"===t.type?Object.assign({},e,{commentModal:!e.commentModal}):"TOGGLE_CREATE_EMAIL_MODAL"===t.type?Object.assign({},e,{createEmailModal:!e.createEmailModal}):"TOGGLE_COPIED_MODAL"===t.type?Object.assign({},e,{copiedModal:!e.copiedModal}):e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;return"REGISTER_ERR"===t.type?Object.assign({},e,{regErr:t.err}):"LOGIN_ERR"===t.type?Object.assign({},e,{logErr:t.err}):"SET_AUTH_TOKEN"===t.type?Object.assign({},e,{authToken:t.authToken}):"SET_CURRENT_USER"===t.type?Object.assign({},e,{currentUser:t.currentUser}):e},email:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;if("CREATE_EMAIL_ERR"===t.type)return Object.assign({},e,{createEmailErr:t.err});if("STORE_EMAILS"===t.type)return Object.assign({},e,{emails:t.emails});if("ADD_NEW_CAMPAIGN"===t.type)return Object.assign({},e,{emails:[t.campaign].concat(Object(pe.a)(e.emails)),selectedCampaign:t.campaign,currentVersion:0});if("REMOVE_CAMPAIGN"===t.type)return Object.assign({},e,{emails:e.emails.filter(function(e){return e._id!==t.campaign._id})});if("SELECT_CAMPAIGN"===t.type)return Object.assign({},e,{selectedCampaign:t.campaign});if("UPDATE_CURRENT_VERSION"===t.type)return Object.assign({},e,{currentVersion:t.version});if("UPDATE_CAMPAIGN"===t.type){var a=t.campaign.email;return Object.assign({},e,{emails:e.emails.map(function(e){return e._id===a._id&&(e=a),e}),selectedCampaign:a,currentVersion:a.versions.length})}return"RECRUITED"===t.type?Object.assign({},e,{recruitFailures:t.recruits.failures,recruitSuccesses:t.recruits.successful}):"CLEAR_RECRUIT_MSGS"===t.type?Object.assign({},e,{recruitFailures:null,recruitSuccesses:null}):e},form:ye.c,io:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;return"CONNECT_SOCKET"===t.type?Object.assign({},e,{socket:t.socket}):"DISCONNECT_SOCKET"===t.type?Object.assign({},e,{socket:null}):e}}),Object(We.a)(He.a)),Qe=localStorage.getItem("authToken");if(Qe){var Xe=Qe;Je.dispatch(G(Xe))}var et=Je;s.a.render(r.a.createElement(c.a,{store:et},r.a.createElement(Be,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Ve?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Fe(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):Fe(e)})}}()},66:function(e,t,a){e.exports=a.p+"static/media/thumbs-up.fcdde84b.svg"}},[[162,2,1]]]);
//# sourceMappingURL=main.6fe20036.chunk.js.map